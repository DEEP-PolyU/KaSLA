
éœ€è¦åœ¨overleafç”»å‡ºæ¥å›¾æ¥ï¼Œæˆ–è€…execalï¼ŒæŠŠå·²æœ‰çš„å®éªŒç»“æœæ”¾ä¸Šå»ï¼Œç„¶åå†è·‘æ–°çš„å®éªŒ


æ ¸å¿ƒæ˜¯æ¸…æ™°çš„addã€‚å…¨paddingçš„å¯ä»¥æ”¾åœ¨ablation study


ç¬¬ä¸€ä¸ªè¡¨çº¯inferenceã€‚

ç”¨starcoder2é‡æ–°è·‘schema linkingã€‚ä¹Ÿè®¸æ˜¯éœ€è¦çš„ï¼ŒåŒæ—¶æ€è€ƒæ€ä¹ˆåŠ å…¥æœ‰æ„æ€çš„ä¸œè¥¿

ç¬¬äºŒä¸ªè¡¨çº¯finetuneã€‚


ç¬¬ä¸€ä¸ªè¡¨å°±ä¸¢æœ€ç§çš„æ•ˆæœï¼Œç¬¬äºŒä¸ªå†æ”¾è¯´æˆ‘ä»¬æ¡†æ¶ç§çš„ä¸€éƒ¨åˆ†å¯¹å·²æœ‰æ¨¡å‹éƒ½æ˜¯æœ‰æå‡çš„ã€‚å³å¯ã€‚
å…ˆä¸è¦æ‰£é‚£ä¹ˆç»†ï¼Œå…ˆåˆ«å½“æˆschema linking paper



å¾…æ‰§è¡Œçš„è„šæœ¬
    1. å½“spiderçš„evalTrainæ‰§è¡Œç»“æŸå ã€codellama 13bã€‘
        (ğŸŒŸEval/eval_ours_SchemaLinking_spider.sh       ç”Ÿæˆsftæ•°æ®é›†
        (ğŸŒŸFT/FAR_add/sft_t2s-codesStyle-FAR-json-add_codellama13b_spider.sh       8ä¸ªï¼Œå¯ä»¥åˆ†åˆ«æ‰§è¡Œ
        (ğŸŒŸEval/eval_ours_t4c4_pt1c2-spider-WR.sh
        (ğŸŒŸEval/eval_ours_t5c6_pt2c3-spider-WR.sh      å„æœ‰8ä¸ªï¼Œåˆ†åˆ«æ‰§è¡Œ
    2. BIRDä¸Š codellama-13b çš„ few-shot
        eval_fewshot_bird-WR.sh
        éœ€è¦è·‘åœ¨ä¸åŒschema linkingä¸Šçš„æ•ˆæœã€‚
        5 shotçš„è·‘å®Œäº†ï¼Œå±…ç„¶onlySLMçš„æ•ˆæœæ˜¯æœ€å¥½çš„ï¼Œä¹Ÿè®¸æ˜¯paddingçš„å¤ªå¤šï¼Œå¯¼è‡´ä¸å¤Ÿé›†ä¸­ã€‚ç®€å•è¯•è¯•t4c4çš„

        eval_DAILSQL_bird-WR.sh

        eval_fewshot_bird-WR.sh
            - æ­£åœ¨è·‘5-shotçš„3ç§SLæ–¹æ³•
        eval_fewshot_spider.sh
            ç­‰å¾…trainæ•°æ®é›†ä¸Šçš„SLç»“æœè·‘å®Œ

        å…ˆæŒ‰ç…§shotä¸€ä¸ªä¸€ä¸ªæµ‹ï¼Œçœ‹ä¸åŒshotå¯¹ä¸åŒschema linkingæ–¹æ³•æœ‰å’©æœ‰æå‡ã€‚
    4. Codes-15bä¸Šä¹Ÿæ˜¯ï¼Œéœ€è¦è·‘ä¸€ä¸‹few-shot
        0620 è·‘ä¸€ä¸‹çœ‹çœ‹
        å¾®è°ƒçš„æ–¹æ³•ä¸è¦å†è·‘few-shotã€‚åªå¯¹æ²¡æœ‰ç»è¿‡å¾®è°ƒçš„æ–¹æ³•

    3. ç›®å‰æœ€æœ‰çš„datasetå’Œæœ€ä¼˜çš„evalæ–¹æ³•ä¸‹ï¼Œä¸åŒçš„llmså’Œè¶…å‚æ•°
        ganita20b:æ­£åœ¨è·‘
        starcoder2-15b:æ­£åœ¨è·‘
        codellama-7b
        llama3-7b


    x. MCS-SQL
        (ğŸŒŸ2ä¸ªæ•°æ®é›†éƒ½éœ€è¦åœ¨evalä¸Šå†è·‘ä¸€ä¸‹question maskingã€‚è¿™ç§question maskçš„ç»“æœä¹Ÿå¯ä»¥ç»™DAIL-SQLä½¿ç”¨
        eval_msc-sql_codellama13b-WR.sh
        (ğŸŒŸéœ€è¦å®Œæˆæ ¹æ®question maskæ¥evalçš„ä»£ç ï¼Œè¿™å—å…¶å®å¯ä»¥åœ¨eval_ours.pyé‡Œå†™ï¼Œæˆ–è€…åŒæ—¶å†™ï¼Œå› ä¸ºéƒ½èƒ½ç”¨åˆ°ã€‚
            è¿™éƒ¨åˆ†ä»£ç åœ¨DAIL-SQLé‚£è¾¹åšäº†ç®€å•çš„å®ç°ï¼ˆéœ€è¦æ£€æŸ¥è®ºæ–‡æŸ¥çœ‹å…·ä½“çš„è®¡ç®—æ–¹å¼ï¼Œç›®å‰å¤§æ¦‚æ˜¯å®ç°äº†ï¼‰
            ï¼ˆä¹Ÿä¸æ˜¯å§ï¼Ÿï¼Ÿæˆ‘è®°å¾—DAILæ˜¯è¦é¢„å…ˆç”Ÿæˆä¸€éSQLï¼Œå†æ ¹æ®è¿™ä¸ªæ£€ç´¢
            ï¼ˆå¯¹çš„ï¼Œæˆ‘ç°åœ¨å®ç°çš„é‚£ä¸€å¨å…¶å®æ˜¯MCS-SQLçš„æ€æƒ³ï¼Œmaskå’Œä¸maskéƒ½è®¡ç®—ã€‚
            ï¼ˆè¿™ä¸ªmaskçš„æ€æƒ³æˆ‘ä¹Ÿå¯ä»¥å€Ÿé‰´åˆ°æˆ‘çš„æ¡†æ¶é‡Œé¢ï¼ŒLLMsçœŸçš„å‰å®³ï¼Œæ²¡æƒ³åˆ°codellamaçš„æ•ˆæœè¿™ä¹ˆå¥½ï¼Œ
            ä½†å…¶å®ä¹Ÿè®¸æˆ‘ç”¨20bç”šè‡³34bçš„æ¨¡å‹åšè¿™äº›in-context-learningçš„å›æ›´å¥½ï¼‰
    L.å¯¹äºquestion maskï¼Œå¯ä»¥æ”¾ä¸€ä¸ª34Bçš„codellamaï¼Œä¹Ÿè®¸æ•ˆæœä¼šæ›´å¥½ã€‚ä½†å…¶å®æˆ‘ä¸ä¼šè¯„ä¼°æ€ä¹ˆç®—å¥½çš„question maskingã€‚å¯ä»¥ç®€å•è¯•è¯•çœ‹ã€‚





baselineï¼š
1. codellama-13bçš„few-shotã€‚
    åŸç‰ˆå·²ç»è·‘è¿‡äº†
    éœ€è¦æµ‹è¯•åœ¨æ–°schema linkingä¸Šçš„ç»“æœã€‚
    æ˜¯å¦éœ€è¦æµ‹è¯•åœ¨2ç§schema linkingæ–¹æ³•ä¸Šçš„ç»“æœï¼Ÿï¼Ÿï¼Ÿ å¯ä»¥æµ‹è¯•ã€‚å…¶å®å°±ç±»ä¼¼äºcodesçš„åšæ³•ï¼›å…ˆä»¥codeså’Œcodellamaä¸ºä¸»ï¼Œç„¶åæ˜¯20bçš„æ¨¡å‹


å¤§æ¨¡å‹ï¼šCodeS-15bï¼ŒCodeLlama-13B ï¼ˆgantia20bï¼‰

ç®—æ³•ï¼š
    1. 0-1-3-5 few shot
    2. MSC-SQLï¼ŒChessï¼ŒDAIL-SQL
    3. GPT4-basedæ–¹æ³•

SLæ–¹æ³•ï¼š
    1. filter
    2. Roberta-3B
    3. ours


æœ€åå†ä»‹ç»è‡ªå·±çš„SFTæ¨¡å‹ã€‚






è®°å½•å·²ç»æ‰§è¡Œè¿‡çš„å®éªŒ

### Schema-linking
    log_eval_bird_dev_sg-t2sTsl-fullS-d-codesStyle_codellama13b_beam-2_checkpoint-1800
    æµ‹è¯•æœ€å¥½çš„SL promptï¼Œå‘ç°è¿˜æ˜¯ç®€å•åœ°full-d noTypeé€‚åˆä¸€äº›

sg-t2sTsl-fullS-d, evalTrain_spider_train_sg-t2sTsl-fullS-d_codellama13b_checkpoint-1800_beam-4
    ç»“æŸåï¼Œå¯ä»¥è·‘åˆ©ç”¨è¿™ä¸ªç”Ÿæˆcodellama-13bçš„è®­ç»ƒæ•°æ®çš„ï¼Œç„¶åçœ‹çœ‹è‡ªå·±è®­ç»ƒçš„codellamaåœ¨addçš„æƒ…å†µä¸‹è¾¾åˆ°ä»€ä¹ˆæ ·çš„å‡†ç¡®åº¦ã€‚



### t2s-codesStyle-FAR-json-add

(ğŸŒŸä¹Ÿè®¸ï¼Œbirdçš„ç»“æœéœ€è¦åœ¨æ–°çš„beam-4çš„SLMä¸Šé‡æ–°è¯„ä¼°ä¸€ä¸‹
Results_eval_bird_dev_sg-t2sTsl-fullS-d_codellama13b_checkpoint-1800_beam-4_relevant_columns.json

ä»¥ä¸‹æ¥è‡ª
Results_eval_sg_t2s-sl_fullS-d_codellama13b_beam-2_checkpoint-1800_bird_dev_relevant_columns.json
æ•ˆæœä¸€èˆ¬çš„ï¼š
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt20c20-Pt1c2_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t5c6_pt2c3
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt20c20-Pt2c3_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t5c6_pt2c3
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt5c6-Pt2c3_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t4c4_pt1c2
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt5c6-Pt1c2_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t4c4_pt1c2
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt6c8-Pt1c2_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t4c4_pt1c2
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt6c8-Pt2c3_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t4c4_pt1c2
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt6c10-Pt2c3_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t4c4_pt1c2

    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt6c8-Pt1c2_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t5c6_pt2c3
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt5c6-Pt1c2_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t5c6_pt2c3

ä¸Š59çš„
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt6c10-Pt1c2_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t4c4_pt1c2
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt6c10-Pt2c3_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t5c6_pt2c3 ï¼ˆğŸŒŸ59.65ï¼‰
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt6c10-Pt1c2_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t5c6_pt2c3
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt6c8-Pt2c3_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t5c6_pt2c3
    log_eval_bird_dev_t2s-codesStyle-FAR-json-add-Tt5c6-Pt2c3_codellama13b_bs16lr1e-4_checkpoint-1800_IN_t2s-codesStyle-json-filtered-add_beam-4_t5c6_pt2c3


## Few-shot ICL
    (ğŸŒŸéœ€è¦è·‘ä¸€ä¸‹åœ¨ä¼˜åŒ–inference schema linkingæƒ…å†µä¸‹çš„Few-shot ICLç»“æœï¼Œä¹Ÿç®—æ˜¯ç»™baselineçš„æå‡)


### MCS-SQL
    (ğŸŒŸè¿™å—æ…¢æ…¢è·‘å®Œcodellamaçš„ç»“æœå³å¯ï¼Œå…¨æå®Œåå¯ä»¥çœ‹çœ‹20bçš„æ•ˆæœã€‚ä½†å¦‚æœ20båœ¨æˆ‘è‡ªå·±çš„æ–¹æ³•ä¸Šæ²¡æœ‰æå‡ï¼Œæˆ‘ä¹Ÿä¸ä¼šè€ƒè™‘åŠ å…¥ã€‚)
    ç›®å‰ï¼Œå¯ä»¥å†™å¥½column matchingçš„ä»£ç ï¼Œè·‘ä¸€ä¸‹birdå’Œspiderï¼Œä¼°è®¡æ¯ä¸ªéƒ½è¦å¾ˆå¤šå¤©ã€‚å 2å¼ å¡ã€‚ç»“æŸåå¯ä»¥è·‘sql generationçš„ä»£ç ï¼Œå°±ç”¨codesçš„åŒ¹é…æ–¹æ³•ã€‚



    log_eval_MCS-SQL_codellama13b_spider_train_question-mask_beam-1
        å¯¹spideråšquestion-maskï¼Œä¸ºåé¢çš„åšå‡†å¤‡

    log_eval_MCS-SQL_codellama13b_spider_dev_table-linking_beam-4_prompt-2
        16:20:51ï¼Œspiderçš„table linkingã€‚åé¢ä¹Ÿè®¸éƒ½ä¼šç”¨beam-4_prompt-2è¿™å¥—è®¾ç½®ï¼Œä¸ç„¶å¤ªè´µäº†ã€‚

    log_eval_MCS-SQL_codellama13b_bird_train_question-mask_beam-1
        46:13:23

    log_eval_MCS-SQL_codellama13b_bird_dev_table-linking_beam-4_prompt-2
        27:39:17 ï¼Œbirdçš„table linkingã€‚

    log_eval_MCS-SQL_codellama13b_bird_dev_table-linking_beam-4_prompt-5
        69:18:19

    log_eval_MCS-SQL_codellama13b_bird_dev_table-linking_beam-1_prompt-5
        38:56:38

    log_eval_MCS-SQL_codellama13b_bird_dev_table-linking_beam-4_prompt-1
        13:51:03

